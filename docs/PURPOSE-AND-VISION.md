# Цель и предназначение сайта  
## Первая версия (по текущему содержимому сервиса)

Документ задаёт **цель**, **аудиторию** и **назначение** продукта на основе текущего функционала. Используется как основа для реконструкции и ребрендинга.

---

## 1. Миссия и цель

**Главная цель:** **контролировать и правильно учитывать расходы на Cursor** — видеть, сколько команда тратит, сверять начисления со счетами и с фактическим использованием, вести учёт по периодам и проектам.

**Сервис — единая внутренняя платформа для команд, использующих Cursor:** сбор аналитики использования, учёт расходов, сопоставление с биллингом и счетами, контроль активности сотрудников и проектов.

**Цель в целом:** дать руководителям и администраторам команды Cursor **прозрачную картину**: кто и как использует продукт, сколько это стоит, как расходы соотносятся со счетами и с учётом людей в Jira — чтобы расходы на Cursor были под контролем и корректно учитывались.

---

## 2. Целевая аудитория

| Роль | Потребность |
|------|-------------|
| **Руководитель команды / тимлид** | Видеть активность по людям и месяцам, расходы по проектам, кто в Jira активен, но не использует или слабо использует Cursor. |
| **Администратор подписки Cursor** | Загружать данные из Cursor API в одно место, хранить ключ безопасно, не дублировать уже загруженное. |
| **Финансы / биллинг** | Иметь загруженные PDF-счета Cursor в структурированном виде, отчёты по периодам биллинга, сверку «Usage Events vs счета». |
| **HR / менеджер проектов** | Сопоставлять список людей из Jira (активный/архивный, проект, даты) с фактическим использованием Cursor. |

Общий признак: **команда уже использует Cursor (Team/Organization)** и нужен **локальный или корпоративный инструмент** без передачи сырых данных во внешние SaaS (всё работает на своём сервере или локально).

---

## 3. Назначение по блокам

### 3.1 Аналитика использования (дашборд)

- **Что даёт:** картина по пользователям и месяцам: запросы, дни активности, строки кода, применения/принятия, события и стоимость Usage Events, токены, расходы текущего месяца (Spend API).
- **Источники данных:** Daily Usage Data, Usage Events, Team Members, Spending Data из Cursor Admin API (сохранённые в локальную БД).
- **Дополнительно:** при загрузке CSV из Jira — отображение имён, статуса (активный/архивный), проекта, дат подключения/отключения вместо только email.
- **Назначение:** ответы на вопросы «кто сколько использует», «сколько тратим по людям и моделям», «кто в Jira есть, но в Cursor не виден».

### 3.2 Участники команды и текущие расходы

- **Что даёт:** актуальный снимок участников команды и расходов текущего месяца (запрос к Cursor API при открытии страницы).
- **Назначение:** быстрая проверка «кто в команде» и «сколько списано за текущий месяц» без копания в сырых ответах API.

### 3.3 Загрузка и хранение данных (настройки)

- **Что даёт:** один API key команды, одна кнопка загрузки данных из Cursor API в локальную SQLite с указанной даты по вчера; пропуск уже загруженных дней; покрытие БД по эндпоинтам и датам; полная или частичная очистка данных.
- **Назначение:** централизованное и предсказуемое накопление аналитики на своём сервере, без дублирования запросов и без хранения ключа в браузере.

### 3.4 Просмотр сырых данных и аудит

- **Что даёт:** просмотр сохранённых данных по эндпоинтам и датам; отдельный раздел по событиям Audit Logs с фильтрами по периоду и типу.
- **Назначение:** проверка «что реально лежит в БД», отладка, расследование по событиям аудита.

### 3.5 Пользователи Jira

- **Что даёт:** загрузка CSV (экспорт из Jira) и полная замена списка «пользователей Jira» в БД; отображение текущего списка; очистка только Jira-данных.
- **Назначение:** привязка активности Cursor к людям и проектам из Jira (имена, статусы, проекты, даты) для дашборда и отчётов.

### 3.6 Счета Cursor (PDF)

- **Что даёт:** загрузка PDF-счетов Cursor, парсинг таблицы или параграфов/списков (Description, Qty, Unit price, Tax, Amount), извлечение даты счёта (Date of issue) и определение типа начисления для каждой позиции (token_usage, token_fee, подписка, proration и др.); сохранение в БД с полями issue_date, charge_type, model; просмотр списка счетов и позиций; удаление счёта с удалением лога; защита от дубликатов по хешу файла.
- **Назначение:** единый реестр счетов и строк для отчётов, сверки с Usage Events и контроля биллинга.

### 3.7 Отчёт по счетам и сверка

- **Что даёт:** отчёт по загруженным счетам (сводка по периодам биллинга и по типам начислений); сверка «Usage Events vs позиции счетов» по периодам биллинга (цикл 6–5): в сверку попадают только позиции с типами **token_usage** и **token_fee**; период счёта определяется по **дате счёта из PDF** (issue_date), а не по дате загрузки. Разница в деньгах по периодам и итогом.
- **Назначение:** проверка соответствия начислений Cursor и фактических событий использования; основа для финансового учёта и планирования.

### 3.8 Безопасный доступ к настройкам

- **Что даёт:** вход по логину и паролю; доступ к разделам загрузки, БД, Jira, счета, аудит, отчёт и сверка только после входа; главный дашборд и снимок «участники и расходы» доступны без входа (опционально можно ужесточить).
- **Назначение:** разграничение «только просмотр» и «управление данными и настройками»; хранение учётных данных и API key на сервере, не в браузере.

---

## 4. Ключевые принципы продукта

- **Локальность / on-premise:** данные Cursor и Jira хранятся в своей БД на своём сервере или локальной машине; API key и пароли не уходят во внешние сервисы.
- **Один источник правды:** одна загрузка по датам, без повторной выкачки уже имеющихся дней; один реестр счетов с парсингом в структурированные позиции.
- **Связка Cursor и Jira:** возможность смотреть аналитику Cursor в разрезе людей и проектов из Jira (при наличии CSV).
- **Прозрачность биллинга:** счета в структурированном виде, отчёты по периодам, сверка с Usage Events для проверки начислений.

---

## 5. Границы (чем продукт не является)

- **Не заменяет** Cursor и не является клиентом Cursor; это внутренний инструмент поверх Cursor Admin API.
- **Не заменяет** Jira; только импорт CSV для сопоставления с Cursor.
- **Не является** публичным SaaS: рассчитан на развёртывание у себя (свой сервер / Docker).
- **Не гарантирует** реальное время: данные дашборда и отчётов — по загруженным в БД данным; снимок «участники и расходы» — по запросу к API на момент открытия страницы.

---

## 6. Критерии успеха (что пользователь получает)

- **Контроль и учёт расходов на Cursor:** расходы видны, сверяются со счетами и с фактическим использованием; учёт ведётся по периодам биллинга и при необходимости по проектам.
- Понимание **кто и как использует Cursor** по месяцам и проектам (при наличии Jira).
- Понимание **сколько команда тратит** (текущий месяц, история по Usage Events, сводки по моделям).
- **Структурированные счета** Cursor и возможность сверять их с Usage Events по периодам биллинга.
- **Единая точка входа** для аналитики, загрузки, Jira, счетов и аудита без разбрасывания по разным утилитам.

---

## 7. Дальнейшие шаги (для реконструкции и ребрендинга)

На основе этого документа можно:

1. Сформулировать **название и слоган** продукта (вместо «Cursor API Dashboard»).
2. Определить **целевой образ** (тон, визуал, терминология) и обновить копирайт, заголовки, подписи.
3. Спроектировать **новую навигацию и структуру страниц** под те же цели и блоки.
4. Выделить **приоритеты** по экранам и функциям для поэтапной реконструкции интерфейса и, при необходимости, бэкенда.

---

*Версия документа: 1.1. Обновлено: навигация (Главная | Расходы | Счета и учёт | Настройки), типы начислений и дата счёта в PDF, сверка по issue_date и только token_usage/token_fee.*
